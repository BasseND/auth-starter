<div class="min-h-screen flex items-center justify-center bg-brand-dark-50 dark:bg-brand-dark-900 py-12 px-4 sm:px-6 lg:px-8">
  <div class="max-w-md w-full space-y-8">
    <!-- En-t√™te -->
    <div class="text-center">
      <div class="mx-auto h-16 w-16 flex items-center justify-center rounded-full bg-brand-green-100 dark:bg-brand-green-900">
        <svg class="h-10 w-10 text-brand-green-600 dark:text-brand-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-3a1 1 0 011-1h2.586l6.414-6.414a6 6 0 015.743-7.743z"></path>
        </svg>
      </div>
      <h2 class="mt-6 text-3xl font-bold text-brand-dark-900 dark:text-brand-dark-100">
        Nouveau mot de passe
      </h2>
      <p class="mt-2 text-sm text-brand-dark-600 dark:text-brand-dark-300">
        Cr√©ez un mot de passe s√©curis√© pour votre compte
      </p>
    </div>

    <!-- Message d'erreur pour token manquant -->
    <app-card *ngIf="!token">
      <app-alert 
        type="error" 
        title="Lien invalide"
        [message]="errorMessage"
      ></app-alert>
      
      <div class="mt-4 text-center">
        <app-button
          variant="outline"
          size="md"
          (onClick)="goToForgotPassword()"
        >
          Demander un nouveau lien
        </app-button>
      </div>
    </app-card>

    <!-- Formulaire -->
    <app-card *ngIf="token && !isSuccess">
      <form class="space-y-6" [formGroup]="resetPasswordForm" (ngSubmit)="onSubmit()">
        <!-- Message d'erreur g√©n√©ral -->
        <app-alert 
          *ngIf="errorMessage && token" 
          type="error" 
          title="Erreur"
          [message]="errorMessage"
          [dismissible]="true"
        ></app-alert>

        <!-- Conseils de s√©curit√© -->
        <app-alert 
          type="info" 
          title="üîí Conseils pour un mot de passe s√©curis√©"
          size="md"
        >
          <div class="text-left space-y-1 mt-2">
            <div class="flex items-start">
              <span class="mr-2">‚Ä¢</span>
              <span>Au moins 8 caract√®res</span>
            </div>
            <div class="flex items-start">
              <span class="mr-2">‚Ä¢</span>
              <span>M√©lange de lettres majuscules et minuscules</span>
            </div>
            <div class="flex items-start">
              <span class="mr-2">‚Ä¢</span>
              <span>Inclure des chiffres et des caract√®res sp√©ciaux</span>
            </div>
            <div class="flex items-start">
              <span class="mr-2">‚Ä¢</span>
              <span>√âviter les informations personnelles</span>
            </div>
          </div>
        </app-alert>

        <!-- Nouveau mot de passe -->
        <app-input
          id="newPassword"
          label="Nouveau mot de passe"
          type="password"
          placeholder="Entrez votre nouveau mot de passe"
          formControlName="newPassword"
          [required]="true"
          autocomplete="new-password"
        ></app-input>

        <!-- Confirmer le mot de passe -->
        <app-input
          id="confirmPassword"
          label="Confirmer le mot de passe"
          type="password"
          placeholder="Confirmez votre nouveau mot de passe"
          formControlName="confirmPassword"
          [required]="true"
          autocomplete="new-password"
        ></app-input>

        <!-- Bouton de soumission -->
        <app-button
          type="submit"
          variant="primary"
          size="lg"
          [fullWidth]="true"
          [loading]="isLoading"
          [disabled]="resetPasswordForm.invalid || isLoading"
        >
          {{ isLoading ? 'Mise √† jour...' : 'Mettre √† jour le mot de passe' }}
        </app-button>

        <!-- Lien retour -->
        <div class="text-center">
          <a routerLink="/login" class="font-medium text-brand-green-600 dark:text-brand-green-400 hover:text-brand-green-500 dark:hover:text-brand-green-300 transition-colors">
            Retourner √† la connexion
          </a>
        </div>
      </form>
    </app-card>

    <!-- Message de succ√®s -->
    <app-card *ngIf="isSuccess">
      <div class="text-center">
        <app-alert 
          type="success" 
          title="Mot de passe mis √† jour !"
          message="Votre mot de passe a √©t√© mis √† jour avec succ√®s. Vous allez √™tre redirig√© vers la page de connexion."
          size="lg"
        ></app-alert>
        
        <div class="mt-6">
          <app-button
            variant="primary"
            size="lg"
            (click)="goToLogin()"
          >
            Aller √† la connexion
          </app-button>
        </div>
      </div>
    </app-card>
  </div>
</div>